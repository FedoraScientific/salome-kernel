<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.20">
 <TITLE>SALOME Kernel resources for developer: Exceptions</TITLE>
 <LINK HREF="kernel_resources-3.html" REL=next>
 <LINK HREF="kernel_resources-1.html" REL=previous>
 <LINK HREF="kernel_resources.html#toc2" REL=contents>
</HEAD>
<BODY>
<A HREF="kernel_resources-3.html">Next</A>
<A HREF="kernel_resources-1.html">Previous</A>
<A HREF="kernel_resources.html#toc2">Contents</A>
<HR>
<H2><A NAME="s2">2.</A> <A HREF="kernel_resources.html#toc2">Exceptions</A></H2>

<H2><A NAME="ss2.1">2.1</A> <A HREF="kernel_resources.html#toc2.1">C++ exceptions: class SALOME_Exception</A>
</H2>

<H3>definition</H3>

<P>The class <CODE>SALOME_Exception</CODE> provides a generic method to send
a message, with optional source file name and line number. This class
is intended to serve as a base class for all kinds of exceptions
SALOME code. All the exceptions derived from <CODE>SALOME_Exception</CODE> could
be handled in a single catch, in which the message associated to
the exception is displayed, or sent to a log file.</P>

<P>The class <CODE>SALOME_Exception</CODE> inherits its behavior from the STL
class exception.</P>

<H3>usage</H3>

<P>The header <CODE>SALOME/src/utils/utils_SALOME_Exception.hxx</CODE> must be
included in the C++ source, when raised or trapped:</P>

<P><CODE>#include </CODE>&quot;<CODE>utils_SALOME_Exception.hxx</CODE>&quot;</P>

<P>The <CODE>SALOME_Exception</CODE> constructor is:</P>

<P>
<PRE>
SALOME_Exception( const char *text,
                  const char *fileName=0, 
                  const unsigned int lineNumber=0 );
</PRE>
</P>
<P>The exception is raised like this:</P>

<P>
<PRE>
throw SALOME_Exception(&quot;my pertinent message&quot;);
</PRE>
</P>
<P>or like this:</P>

<P>
<PRE>
throw SALOME_Exception(LOCALIZED(&quot;my pertinent message&quot;));
</PRE>
</P>
<P>where LOCALIZED is a macro provided with <CODE>utils_SALOME_Exception.hxx</CODE>
which gives file name and line number.</P>

<P>The exception is handled like this:</P>

<P>
<PRE>
try
  {
    ...
  }
catch (const SALOME_Exception &amp;ex)
  {
    cerr &lt;&lt; ex.what() &lt;&lt;endl;
  }
</PRE>
</P>
<P>The <CODE>what()</CODE> method overrides the one defined in the STL exception
class.</P>

<H2><A NAME="ss2.2">2.2</A> <A HREF="kernel_resources.html#toc2.2">CORBA exceptions</A>
</H2>

<H3>definition</H3>

<P>The idl <CODE>SALOME_Exception</CODE> provides a generic CORBA exception for
SALOME, with an attribute that gives an exception type,a message,
plus optional source file name and line number. </P>

<P>This idl is intended to serve for all user CORBA exceptions raised
in SALOME code, as IDL specification does not support exception inheritance.
So, all the user CORBA exceptions from SALOME could be handled in
a single catch.</P>

<P>The exception types defined in idl are:</P>

<P>
<DL>
<DT><B>COMM</B><DD><P>CORBA communication problem,</P>
<DT><B>BAD_PARAM</B><DD><P>Bad User parameters,</P>
<DT><B>INTERNAL_ERROR</B><DD><P>application level problem (often irrecoverable).</P>

</DL>
</P>
<P>CORBA system and user exceptions already defined in the packages
used within SALOME, such as OmniORB exceptions, must be handled separately.</P>

<H3>usage</H3>

<H3>CORBA servant, C++</H3>

<P>The CORBA Server header for <CODE>SALOME_Exception</CODE> and a macro to throw
the exception are provided with the header <CODE>SALOME/src/Utils/Utils_CorbaException.hxx</CODE>:</P>

<P>
<PRE>
#include &quot;Utils_CorbaException.hxx&quot;
</PRE>
</P>
<P>The exception is raised with a macro which appends file name
and line number.</P>

<P>
<PRE>
if (myStudyName.size() == 0)
   THROW_SALOME_CORBA_EXCEPTION(&quot;No Study Name given&quot;, \
                                SALOME::BAD_PARAM);
</PRE>
</P>
<H3>CORBA Client, GUI Qt C++</H3>

<P>The CORBA Client header for <CODE>SALOME_Exception</CODE> and a Qt function
header that displays a message box are provided in <CODE>SALOME/src/SALOMEGUI/SALOMEGUI_QtCatchCorbaException.hxx</CODE>:</P>

<P>
<PRE>
#include &quot;SALOMEGUI_QtCatchCorbaException.hxx&quot;
</PRE>
</P>
<P>A typical exchange with a CORBA Servant will be:</P>

<P>
<PRE>
try
  {
    ... // one ore more CORBA calls
  }
catch (const SALOME::SALOME_Exception &amp; S_ex)
  {
    QtCatchCorbaException(S_ex);
  }

</PRE>
</P>
<H3>CORBA Client, C++, without GUI</H3>

<P>Nothing specific has been provided to the developer yet. See
the idl or the Qt function <CODE>SALOMEGUI_QtCatchCorbaException.hxx</CODE> to
see how to get the information given by the exception object.</P>

<HR>
<A HREF="kernel_resources-3.html">Next</A>
<A HREF="kernel_resources-1.html">Previous</A>
<A HREF="kernel_resources.html#toc2">Contents</A>
</BODY>
</HTML>
